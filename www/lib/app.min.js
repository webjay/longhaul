(function(exports,global){global.lh=exports;var Snapshots,app,cameraButtonView,photoItemView,photoListView,snapshotModel,template,templates,_ref,_ref1,_ref2,_ref3,_ref4,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};exports.app=app={},snapshotModel=function(_super){function snapshotModel(){return _ref=snapshotModel.__super__.constructor.apply(this,arguments)}return __extends(snapshotModel,_super),snapshotModel.prototype.defaults={fullPath:"http://farm9.staticflickr.com/8437/7985037130_00a14b4339_d.jpg"},snapshotModel}(Backbone.Model),Snapshots=function(_super){function Snapshots(){return _ref1=Snapshots.__super__.constructor.apply(this,arguments)}return __extends(Snapshots,_super),Snapshots.prototype.model=snapshotModel,Snapshots.prototype.initialize=function(){return $("#snaps").html((new photoListView).render().$el),this.on("add",function(model){var view;return view=new photoItemView({model:model}),$("#snaps .thumbnails").append(view.render().$el)})},Snapshots.prototype.parse=function(response){return console.log(response),[]},Snapshots}(Backbone.Collection),templates={},template='<div class="thumbnail"><img src="<%= src %>" alt="Snapshot" /></div>',templates.snapshotView=_.template(template),cameraButtonView=function(_super){function cameraButtonView(){return this.capturePhoto=__bind(this.capturePhoto,this),this.initialize=__bind(this.initialize,this),_ref2=cameraButtonView.__super__.constructor.apply(this,arguments)}return __extends(cameraButtonView,_super),cameraButtonView.prototype.events={click:"capturePhoto"},cameraButtonView.prototype.initialize=function(){return this.$el=$("#camtoggle")},cameraButtonView.prototype.capturePhoto=function(){var error;try{return navigator.device.capture.captureImage(this.photoSuccess,this.photoFail,{limit:1})}catch(_error){return error=_error,console.error(error)}},cameraButtonView.prototype.photoSuccess=function(mediaFiles){return new Snapshots(mediaFiles,{silent:!1})},cameraButtonView.prototype.photoFail=function(message){return console.error(message)},cameraButtonView}(Backbone.View),photoListView=function(_super){function photoListView(){return _ref3=photoListView.__super__.constructor.apply(this,arguments)}return __extends(photoListView,_super),photoListView.prototype.tagName="ul",photoListView.prototype.className="thumbnails",photoListView}(Backbone.View),photoItemView=function(_super){function photoItemView(){return this.render=__bind(this.render,this),_ref4=photoItemView.__super__.constructor.apply(this,arguments)}return __extends(photoItemView,_super),photoItemView.prototype.tagName="li",photoItemView.prototype.render=function(){return this.$el.html(templates.snapshotView({src:this.model.get("fullPath")})),this},photoItemView}(Backbone.View),jQuery(function($){return Backbone.$=$,new cameraButtonView})})({},function(){return this}());